# Lead CRM

Мини-CRM система для автоматического распределения лидов между операторами с учётом источников трафика, 
весов операторов и лимитов нагрузки.


# Функциональность

- **Управление операторами** - создание, просмотр, управление активностью и лимитами нагрузки
- **Настройка источников (ботов)** - добавление ботов/каналов поступления обращений
- **Распределение обращений** - настройка весов операторов для каждого источника
- **Автоматическое назначение** - распределение с учётом:
  - Весов операторов (процентное соотношение)
  - Лимитов нагрузки операторов
  - Активности операторов
- **Отслеживание лидов** - управление клиентами и их обращениями из разных источников

### Бизнес-логика
- Один лид может обращаться через несколько разных источников
- Автоматическое определение существующих лидов по external_id
- Распределение обращений с вероятностным выбором на основе весов
- Защита от перегрузки операторов

## Стек

- **FastAPI** - веб-фреймворк
- **SQLAlchemy** - ORM
- **SQLite** - база данных
- **Alembic** - миграции базы данных
- **Pydantic** - валидация данных
- **Uvicorn** - сервер для запуска приложения

## Установка и запуск

### Способ 1: Запуск через Poetry

```bash
# Установка зависимостей
poetry install

# Запуск приложения
poetry run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```
### Способ 2: Запуск через Docker

```bash
# Сборка и запуск контейнера
docker-compose up -d --build
```
